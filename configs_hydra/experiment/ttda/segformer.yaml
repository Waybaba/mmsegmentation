# @package _global_

defaults:
- /_base_/models: segformer_mit-b0.yaml
- /_custom_/datasets: gta2cityscapes.yaml
- /_base_/default_runtime.yaml
- /_base_/schedules_nooptim: schedule_160k.yaml
- optim: ttda.yaml
- ./ttda.yaml

crop_size_list_: ??? # [512, 512] or [1024, 1024]
stride_list_: ???

crop_size: &id001
  _args_:
  - ${crop_size_list_} # e.g. [1024, 1024]
  _target_: builtins.tuple

data_preprocessor:
  size: ${crop_size}
# checkpoint: https://download.openmmlab.com/mmsegmentation/v0.5/pretrain/segformer/mit_b0_20220624-7e0fe6dd.pth
model:
  backbone:
    init_cfg:
      checkpoint: ???
      type: Pretrained
  data_preprocessor:
    size: ${crop_size} # *id001
  test_cfg:
    crop_size: ${crop_size} # *id001
    mode: slide
    stride:
      _args_:
      - ${stride_list_} # 0.75 * crop_size e.g. [768, 768]
      _target_: builtins.tuple
# ! see optim for lr and scheduler
train_dataloader:
  batch_size: 1
  num_workers: 4
val_dataloader:
  batch_size: 1
  num_workers: 4
test_dataloader:
  batch_size: 1
  num_workers: 4



